{% block content %}
<div class="content" style="height: calc(100% - 20px); overflow-y: clip;">
    <div class="columns">
        <div class="column is-3">
            <div class="field">
                <label class="label">Kokouspäivä</label>
                <div class="control">
                    <select class="input is-primary" id="rooms-search-day">
                        <option value="">Valitse päivä</option>
                        {% for day in open_days %}
                        <option value="{{ day.id }}">{{ day }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <div class="field">
                <label class="label">Henkilömäärä</label>
                <div class="control">
                    <input class="input" type="number" min="2" max="800" id="rooms-search-seats">
                </div>
            </div>

            <button type="button" class="button is-primary" onclick="rooms_search();">Hae</button>
        </div>
        <div class="column">
            <div class="" id="rooms-list">

            </div>
        </div>
    </div>
</div>

<div id="room-template" style="display: none;">
    <div class="is-primary">
        <h3 class="title is-3"></h3>
        <div class="room-info">
            <p>Kapasiteetti <span class="room-capacity"></span><br/>
            <span class="room-description"></span></p>
        </div>
    </div>
</div>

<script>

function rooms_search() {
    var day = $("#rooms-search-day").val();
    var seats = $("#rooms-search-seats").val();

    $.get("/api/rooms?day=" + day + "&seats=" + seats, function(data) {
        for(var i = 0; i < data.length; i++) {
            var room = data[i];
            var room_html = $("#room-template").clone();
            room_html.removeAttr("style");
            room_html.find(".title").text(room.name);
            room_html.find(".room-capacity").text(room.capacity);
            room_html.find(".room-description").text(room.description);
            $("#rooms-list").append(room_html);
        }
    });
}

</script>
{% endblock %}