{% extends "base.html" %}
{% load static %}
{% block content %}
<script>
var default_settings = {
    page: "rooms",
}

function refresh_settings() {
    localStorage.setItem('settings', JSON.stringify(settings));
}

function compare_objects(obj1, obj2) {
    for(const [key, value] of Object.entries(obj1)) {
        if(Array.isArray(value)) {
            if(typeof obj2[key] == "undefined") {
                obj2[key] = value;
            }
        } else if(typeof value == "object") {
            obj2[key] = compare_objects(obj1[key], obj2[key]);
        } else {
            if(typeof obj2[key] == "undefined") {
                obj2[key] = value;
            }
        }
    }
    return obj2;
}

function compare_settings(settings) {
    settings = compare_objects(default_settings, settings);
    refresh_settings();
}

if(localStorage.getItem('settings') == null) {
    settings = default_settings;
    refresh_settings();
} else {
    settings = JSON.parse(localStorage.getItem('settings'));
    compare_settings(settings);
}

</script>
<style>
.leaflet-tooltip {
    border: none;
    background: none;
    box-shadow: none;
    font-weight: bold;
    font-size: 1.4em;
    -webkit-text-stroke: 1px black;
}

#background {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    background-color: #000;
    opacity: 0.5;
    background-image: url('{% static 'img/tausta.png' %}');
}
</style>
<div id="background"></div>
<div class="columns" style="height: 100%; margin: 0px;">
    <div class="column p-2 is-1">
        <div class="is-boxed" style="background-color: #fff; border-radius: 10px; height: 107px;">
            <img src="{% static 'img/logo.png' %}">
        </div>
    </div>
    <div class="column" style="width: auto;">
        {% include 'pages.html' %}
    </div>
</div>
<script>

</script>
{% include 'settings.html' %}
{% endblock %}