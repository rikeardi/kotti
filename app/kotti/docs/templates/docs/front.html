{% extends "base.html" %}
{% load static %}
{% block content %}
<style>
ul ol {
    list-style: none;
}
</style>
<script>

</script>
<div class="columns" style="height: 100%; margin: 0px;">
    <div class="column p-2 is-1 has-text-centered">
        <div class="is-boxed">
            <img src="{% static 'img/logo.png' %}" style="max-width: 60px;">
        </div>
    </div>
    <div class="column is-quarter">
        <div class="box">
            <div class="block">
                <h4 class="title is-4" style="cursor: pointer;" onclick="location.href='/docs';">User manual</h4>
            </div>
            <div class="block">
                <aside class="menu">
                    {% for header in headers %}
                    <div class="m-1">
                        {% if page in header.docspage_set.all %}
                        <p class="menu-label" id="docs-label-{{ header.id }}" style="cursor: pointer;" onclick="docs_toggle_menu({{ header.id }})">
                            <span class="icon is-small"><i class="fas fa-angle-down"></i></span> {{ header.title }}
                        </p>
                        <ul class="menu-list" id="docs-menu-{{ header.id }}">
                        {% else %}
                        <p class="menu-label" id="docs-label-{{ header.id }}" style="cursor: pointer;" onclick="docs_toggle_menu({{ header.id }})">
                            <span class="icon is-small"><i class="fas fa-angle-right"></i></span> {{ header.title }}
                        </p>
                        <ul class="menu-list is-hidden" id="docs-menu-{{ header.id }}">
                        {% endif %}
                        {% for page in header.docspage_set.all %}
                            <li><a href="/docs/{{ page.title | lower | escape }}">{{ page.title | title }}</a></li>
                        {% endfor %}
                            <li class="docs-edit is-hidden">
                                <div class="field has-addons">
                                    <div class="control is-expanded">
                                        <input class="input is-small" type="text" placeholder="New page..." autocomplete="no">
                                    </div>
                                    <div class="control">
                                        <button class="button is-small is-success"><i class="fa fa-plus" title="Add..." onclick="new_contact_modal_open();"></i></button>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    {% endfor %}
                </aside>
            </div>
        </div>
    </div>
    <div class="column is-two-thirds">
        <div class="box" style="position: relative;">
            {% if user.is_superuser %}
            <button class="button is-primary is-small" style="position: absolute; top: 10px; right: 10px;" onclick="docs_toggle_edit();">Edit</button>
            {% endif %}
            {% if page %}
            <div class="content">
                <p><span class="icon is-small"><a href="/docs"><i class="fas fa-home"></i></a></span></p>
            </div>
            {% endif %}
            <div class="content">

            </div>
        </div>
    </div>
</div>
<script>

var edit_mode = false;
function docs_toggle_edit() {
    edit_mode = !edit_mode;
    if(edit_mode) {
        $(".docs-edit").removeClass("is-hidden");
    } else {
        $(".docs-edit").addClass("is-hidden");
    }
}

function docs_toggle_menu(id) {
    $(".menu-list").addClass("is-hidden");
    $(".fa-angle-down").removeClass("fa-angle-down").addClass("fa-angle-right");
    $("#docs-label-" + id + " svg").removeClass("fa-angle-right").addClass("fa-angle-down");
    $("#docs-menu-" + id).removeClass("is-hidden");
}

</script>
{% endblock %}